(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(0),r=t(2),u=t(15),a=t.n(u),o=t(6),i=t(3),s=t(4),l=t.n(s),d="/api/persons",b=function(){return l.a.get(d).then((function(e){return e.data})).catch((function(e){console.log("failed request")}))},j=function(e){return l.a.post(d,e).then((function(e){return e.data}))},h=function(e,n){return l.a.put("".concat(d,"/").concat(e),n).then((function(e){return e.data}))},f=function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data})).catch((function(e){console.log("failed delete request")}))},m=function(e){var n=e.name,t=e.number;return Object(c.jsxs)("span",{children:[n," - ",t]})},O=function(e){var n=e.condOperator,t=e.setPersons,r=e.setSuccessMessage;return n.map((function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)(m,{name:e.name,number:e.number}),Object(c.jsx)("button",{onClick:function(){return n=e.id,void(window.confirm("Delete name from phonebook?")&&(f(n).then((function(e){b().then((function(e){t(e)}))})),r("delete successfull"),setTimeout((function(){r(null)}),5e3)));var n},children:"-"})]},e.name)}))},p=function(e){var n=e.message,t=e.typeIsError;return null===n?null:t?Object(c.jsx)("div",{class:"error",children:n}):Object(c.jsx)("div",{class:"succ",children:n})},v=function(e){var n=e.changeHandler,t=e.filterWord;return Object(c.jsxs)("div",{children:["filter by name:",Object(c.jsx)("input",{onChange:n,value:t})]})},x=function(e){var n=e.handleSubmitForm,t=e.newName,r=e.handleNameChange,u=e.newNumber,a=e.handleNumberChange;return Object(c.jsxs)("form",{onSubmit:n,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:t,onChange:r})]}),Object(c.jsxs)("div",{children:["number: ",Object(c.jsx)("input",{value:u,onChange:a})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},g=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],u=n[1],a=Object(r.useState)(""),s=Object(i.a)(a,2),l=s[0],d=s[1],f=Object(r.useState)(""),m=Object(i.a)(f,2),g=m[0],w=m[1],S=Object(r.useState)(""),N=Object(i.a)(S,2),y=N[0],C=N[1],k=Object(r.useState)(null),E=Object(i.a)(k,2),I=E[0],T=E[1],P=Object(r.useState)(null),q=Object(i.a)(P,2),D=q[0],F=q[1];Object(r.useEffect)((function(){b().then((function(e){u(e)}))}),[]);var H=""===y?t:t.filter((function(e){return e.name.includes(y)}));return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(p,{message:I,typeIsError:!0}),Object(c.jsx)(p,{message:D,typeIsError:!1}),Object(c.jsx)(v,{changeHandler:function(e){return C(e.target.value)},filterWord:y}),Object(c.jsx)("h2",{children:"Add a new"}),Object(c.jsx)(x,{handleSubmitForm:function(e){if(e.preventDefault(),t.map((function(e){return e.name})).includes(l)){if(window.confirm("".concat(l," is already in the phonebook, replace the old number with a new one?"))){var n=t.find((function(e){return e.name===l})),c=Object(o.a)(Object(o.a)({},n),{},{number:g});h(c.id,c).then((function(e){u(t.map((function(n){return n.name!==l?n:e}))),F("".concat(l," Information updated")),setTimeout((function(){F(null)}),5e3)})).catch((function(e){T("".concat(l," has already been removed from the server... updating list."))})),setTimeout((function(){T(null)}),5e3),b().then((function(e){u(e)})),w(""),d("")}}else j({name:l,number:g}).then((function(e){u(t.concat(e)),F("".concat(l," added to phonebook")),setTimeout((function(){F(null)}),5e3),w(""),d("")})).catch((function(e){T("name must be at least 3 and number 8 characters long"),setTimeout((function(){T(null)}),5e3)}))},newName:l,handleNameChange:function(e){return d(e.target.value)},newNumber:g,handleNumberChange:function(e){return w(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(O,{condOperator:H,persons:t,setPersons:u,setSuccessMessage:F})]})};t(38);a.a.render(Object(c.jsx)(g,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c01a90f9.chunk.js.map